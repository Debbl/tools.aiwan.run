(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8084:function(e,t,l){Promise.resolve().then(l.bind(l,6975))},6975:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return b}});var s=l(2367),a=l(1833),i=l(2490),n=l(2135),r=l(9941),c=l(6904),d=l(8276),o=l(2227);let u=(0,l(1768).O4)("code-diff-main-store",{originalValue:"",modifiedValue:"",language:"plaintext",languages:[],theme:"light",renderSideBySide:!0});function h(){let[e,t]=(0,o.useAtom)(u);return{...e,setOriginalValue:e=>t(t=>({...t,originalValue:e})),setModifiedValue:e=>t(t=>({...t,modifiedValue:e})),setLanguage:e=>t(t=>({...t,language:e})),setLanguages:e=>t(t=>({...t,languages:e})),setTheme:e=>t(t=>({...t,theme:e})),setRenderSideBySide:e=>t(t=>({...t,renderSideBySide:e}))}}var x=e=>{let{monaco:t}=e,{language:l,languages:a,theme:i,renderSideBySide:n,setLanguage:o,setTheme:u,setRenderSideBySide:x}=h(),{isHydrated:m}=(0,r.U$)(),{GitHubInfo:g}=(0,r.xr)("https://github.com/Debbl/code-diff");return(0,s.jsxs)("header",{className:"flex items-center gap-x-3 p-3",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{children:["选择语言：",(0,s.jsx)("select",{value:l,onChange:e=>{o(e.target.value)},className:"select select-bordered select-xs ml-3 w-60 border",children:m&&a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.id},e.id))})]})}),(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("label",{children:["选择主题：",(0,s.jsxs)("select",{value:i,onChange:e=>{u(e.target.value)},className:"select select-bordered select-xs ml-3 w-60 border",children:[(0,s.jsx)("option",{value:"light",children:"light"}),(0,s.jsx)("option",{value:"vs-dark",children:"vs-dark"})]})]})}),(0,s.jsx)("div",{className:"form-control",children:(0,s.jsxs)("label",{className:"label cursor-pointer",children:[(0,s.jsx)("span",{className:"label-text",children:"并排显示："}),(0,s.jsx)("input",{className:"checkbox checkbox-xs ml-3",type:"checkbox",checked:n,onChange:e=>{x(e.target.checked)}})]})}),(0,s.jsx)("div",{className:"btn btn-circle btn-xs",onClick:()=>{null==t||t.editor.getModels().forEach(e=>{e.setValue("")})},children:(0,s.jsx)(c.JO,{className:"size-[18px] cursor-pointer",icon:d.Z})}),(0,s.jsx)(g,{className:"ml-8 flex size-[18px] justify-center"})]})},m=()=>{let{theme:e}=h();(0,n.useEffect)(()=>{document.querySelector("html").dataset.theme=e},[e])},g=l(3229),f=l(3605),j=()=>{let[e,t]=(0,n.useState)(!1),[l,a]=(0,n.useState)("");return{Toast:()=>(0,s.jsx)(s.Fragment,{children:e&&(0,f.createPortal)((0,s.jsxs)("div",{className:" alert  fixed right-0 top-4 w-80 ",children:[(0,s.jsx)(c.JO,{icon:g.Z}),(0,s.jsx)("span",{children:l})]}),document.body)}),showToast:e=>{t(!0),a(e);let l=setTimeout(()=>{t(!1),clearTimeout(l)},2e3)}}};let{basePath:p}={reactStrictMode:!0,output:"export",basePath:"/code-diff"};function b(){let{originalValue:e,modifiedValue:t,language:l,languages:c,theme:d,renderSideBySide:o,setOriginalValue:u,setModifiedValue:g,setLanguage:f,setLanguages:b}=h();m();let{Toast:v,showToast:N}=j(),k=(0,n.useRef)(),V=(0,r.dU)(l),{isHydrated:S}=(0,r.U$)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex h-screen flex-col items-center",children:[(0,s.jsx)("h1",{className:"my-2 cursor-pointer text-center text-xl font-medium",children:(0,s.jsx)("a",{href:p,children:"Code Diff"})}),(0,s.jsx)(v,{}),(0,s.jsx)(x,{monaco:k.current}),(0,s.jsx)("main",{className:"size-full",children:S&&(0,s.jsx)(a.SV,{options:{originalEditable:!0,renderSideBySide:o},onMount:(l,s)=>{k.current=s,b(s.languages.getLanguages()),l.getOriginalEditor().setValue(e),l.getModifiedEditor().setValue(t),l.onDidUpdateDiff(()=>{var e,t;let s=(null===(e=l.getModel())||void 0===e?void 0:e.original.getValue())||"",a=(null===(t=l.getModel())||void 0===t?void 0:t.modified.getValue())||"",n=i.Z.highlightAuto(s).language,r=c.map(e=>e.id);n&&n!==V.current&&r.includes(n)&&(N("已自动检测到语言 ".concat(n)),f(n)),u(s),g(a)})},height:"100%",theme:d,language:l})})]})})}}},function(e){e.O(0,[227,28,375,323,744],function(){return e(e.s=8084)}),_N_E=e.O()}]);