(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4277:function(e,t,s){Promise.resolve().then(s.bind(s,3719))},8342:function(e){"use strict";e.exports={reactStrictMode:!0,output:"export",basePath:"/code-diff"}},3719:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Page}});var a=s(1911),l=s(9357),i=s(8799),n=s(4032),r=s(8964),d=s(8342),c=s(9997),o=s(4881);let u=(0,c.Ue)()((0,o.tJ)(e=>({originalValue:"",modifiedValue:"",language:"plaintext",languages:[],theme:"light",renderSideBySide:!0,setOriginalValue:t=>e({originalValue:t}),setModifiedValue:t=>e({modifiedValue:t}),setLanguage:t=>e({language:t}),setLanguages:t=>e({languages:t}),setTheme:t=>e({theme:t}),setRenderSideBySide:t=>e({renderSideBySide:t})}),{name:"code-diff-main-store",version:1}));var g=s(144),h=s(5427);let selector=e=>[{language:e.language,languages:e.languages,theme:e.theme,renderSideBySide:e.renderSideBySide},{setLanguage:e.setLanguage,setLanguages:e.setLanguages,setTheme:e.setTheme,setRenderSideBySide:e.setRenderSideBySide}];var components_Header=e=>{let{monaco:t}=e,[{language:s,languages:l,theme:i,renderSideBySide:n},{setLanguage:d,setTheme:c,setRenderSideBySide:o}]=u(selector),{isHydrated:m}=(0,r.U$)(),{GitHubInfo:x}=(0,r.xr)("https://github.com/Debbl/code-diff");return(0,a.jsxs)("header",{className:"flex items-center gap-x-3 p-3",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{children:["选择语言：",(0,a.jsx)("select",{value:s,onChange:e=>{d(e.target.value)},className:"select select-bordered select-xs ml-3 w-60 border",children:m&&l.map(e=>(0,a.jsx)("option",{value:e.id,children:e.id},e.id))})]})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{children:["选择主题：",(0,a.jsxs)("select",{value:i,onChange:e=>{c(e.target.value)},className:"select select-bordered select-xs ml-3 w-60 border",children:[(0,a.jsx)("option",{value:"light",children:"light"}),(0,a.jsx)("option",{value:"vs-dark",children:"vs-dark"})]})]})}),(0,a.jsx)("div",{className:"form-control",children:(0,a.jsxs)("label",{className:"label cursor-pointer",children:[(0,a.jsx)("span",{className:"label-text",children:"并排显示："}),(0,a.jsx)("input",{className:"checkbox checkbox-xs ml-3",type:"checkbox",checked:n,onChange:e=>{o(e.target.checked)}})]})}),(0,a.jsx)("div",{className:"btn btn-circle btn-xs",onClick:()=>{null==t||t.editor.getModels().forEach(e=>{e.setValue("")})},children:(0,a.jsx)(g.JO,{className:"h-[18px] w-[18px] cursor-pointer",icon:h.Z})}),(0,a.jsx)(x,{className:"ml-8 flex h-[18px] w-[18px] justify-center"})]})},hooks_useTheme=()=>{let e=u(e=>"vs-dark"===e.theme?"dark":"light");(0,n.useEffect)(()=>{let t=document.querySelector("html");t.dataset.theme=e},[e])},m=s(665),x=s(1796),hooks_useToast=()=>{let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)("");return{Toast:()=>(0,a.jsx)(a.Fragment,{children:e&&(0,x.createPortal)((0,a.jsxs)("div",{className:" alert  alert-success fixed right-0 top-4 w-80 ",children:[(0,a.jsx)(g.JO,{icon:m.Z}),(0,a.jsx)("span",{children:s})]}),document.body)}),showToast:e=>{t(!0),l(e);let s=setTimeout(()=>{t(!1),clearTimeout(s)},2e3)}}};let page_selector=e=>[{originalValue:e.originalValue,modifiedValue:e.modifiedValue,language:e.language,languages:e.languages,theme:e.theme,renderSideBySide:e.renderSideBySide},{setLanguage:e.setLanguage,setLanguages:e.setLanguages,setOriginalValue:e.setOriginalValue,setModifiedValue:e.setModifiedValue}];function Page(){let[{originalValue:e,modifiedValue:t,language:s,languages:c,theme:o,renderSideBySide:g},{setOriginalValue:h,setModifiedValue:m,setLanguage:x,setLanguages:f}]=u(page_selector);hooks_useTheme();let{Toast:p,showToast:j}=hooks_useToast(),v=(0,n.useRef)(),b=(0,r.dU)(s);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex h-screen flex-col items-center",children:[(0,a.jsx)("h1",{className:"my-2 cursor-pointer text-center text-xl font-medium",children:(0,a.jsx)("a",{href:d.basePath,children:"Code Diff"})}),(0,a.jsx)(p,{}),(0,a.jsx)(components_Header,{monaco:v.current}),(0,a.jsx)("main",{className:"h-full w-full",children:(0,a.jsx)(l.SV,{options:{originalEditable:!0,renderSideBySide:g},onMount:(s,a)=>{v.current=a,f(a.languages.getLanguages()),s.getOriginalEditor().setValue(e),s.getModifiedEditor().setValue(t),s.onDidUpdateDiff(()=>{var e,t;let a=(null===(e=s.getModel())||void 0===e?void 0:e.original.getValue())||"",l=(null===(t=s.getModel())||void 0===t?void 0:t.modified.getValue())||"",n=i.Z.highlightAuto(a).language,r=c.map(e=>e.id);n&&n!==b.current&&r.includes(n)&&(j("已自动检测到语言 ".concat(n)),x(n)),h(a),m(l)})},height:"100%",theme:o,language:s})})]})})}}},function(e){e.O(0,[402,843,509,744],function(){return e(e.s=4277)}),_N_E=e.O()}]);